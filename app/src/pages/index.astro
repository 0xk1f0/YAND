---
import Layout from "../layouts/Layout.astro";
import Category from "../components/Category.astro";
import ConfigParser from "../lib/config";

const CONFIG = new ConfigParser();
const YAML = await CONFIG.readConfig();
const ICONS = await CONFIG.getAllIcons(YAML);
---

<Layout
    preloads={ICONS}
    bodyColor={YAML.default.surface}
    title={YAML.title + " | " + YAML.subtitle}
>
    <div class="flex flex-1 mx-auto my-auto max-w-screen-xl">
        <div class="flex flex-1 flex-wrap m-4">
            {
                YAML.services.map((entry: { name: string; items: any }) => (
                    <Category
                        name={entry.name}
                        foreground={YAML.default.foreground}
                        background={YAML.default.background}
                    />
                ))
            }
        </div>
    </div>
</Layout>
